<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RPS</title>
    <style>
      body {
        font-size: 13px;
      }
    </style>
  </head>
  <body></body>
  <script>
    //UI
    const body = document.querySelector("body");
    const container = document.createElement("div");

    body.appendChild(container);

    const selections = document.createElement("ul");

    const rock = document.createElement("button");
    rock.setAttribute("id", "rock");
    rock.setAttribute("class", "ui");

    rock.textContent = "rock";
    const paper = document.createElement("button");

    paper.setAttribute("id", "paper");
    paper.setAttribute("class", "ui");
    paper.textContent = "paper";

    const scissor = document.createElement("button");
    scissor.setAttribute("id", "scissor");
    scissor.setAttribute("class", "ui");
    scissor.textContent = "scissor";

    selections.appendChild(rock);
    selections.appendChild(paper);
    selections.appendChild(scissor);
    container.appendChild(selections);

    //SCORE BOARD
    const scoreBoard = document.createElement("ul");
    container.appendChild(scoreBoard);

    selections.addEventListener("click", (e) => {
      let playerSelection = e.target.id;
      playRound(playerSelection);
    });

    let compScore = 0;
    let humanScore = 0;

    function getComputerChoice() {
      let rand = Math.floor(Math.random() * 3 + 1);
      switch (rand) {
        case 1:
          return "rock";
          break;
        case 2:
          return "paper";
          break;
        case 3:
          return "scissor";
          break;
      }
    }

    function declareWinner() {
      const msg = document.createElement("h3");
      if (humanScore > compScore) {
        msg.textContent = "Human wins!";
      } else {
        msg.textContent = "Computer wins!";
      }
      scoreBoard.appendChild(msg);
    }

    function playRound(playerSelection) {
      let roundWinner = "";
      let currScores = "";
      let selections = "";
      let compSelection = getComputerChoice();

      if (playerSelection === "rock" && compSelection === "paper") {
        roundWinner = "You lose! Paper beats rock!";
        compScore++;
      } else if (playerSelection === "paper" && compSelection === "scissor") {
        roundWinner = "You lose! Scissor beats paper!";
        compScore++;
      } else if (playerSelection === "scissor" && compSelection === "rock") {
        roundWinner = "You lose!  Rock beats scissor!";
        compScore++;
      } else if (playerSelection === compSelection) {
        roundWinner = "It's a tie!";
      } else {
        roundWinner =
          "You win! " + playerSelection + " " + "beats " + compSelection + "!";
        humanScore++;
      }

      selections = `Comp Selection: ${compSelection} — Player Selection: ${playerSelection}`;
      currScores = `Comp Score: ${compScore} — Player Score: ${humanScore}`;

      displayScore(selections, currScores, roundWinner);

      if (humanScore === 5 || compScore === 5) {
        declareWinner();
        const btns = document.querySelectorAll("button.ui");
        btns.forEach((bttn) => {
          bttn.disabled = true;
        });

        const reset = document.createElement("button");
        reset.textContent = "reset";
        scoreBoard.appendChild(reset);
        reset.addEventListener("click", () => {
          scoreBoard.textContent = "";
          btns.forEach((bttn) => {
            bttn.disabled = false;
            humanScore = 0;
            compScore = 0;
          });
        });
      }
    }

    function displayScore(selections, currScores, roundWinner) {
      const displaySelections = document.createElement("li");
      const currentScores = document.createElement("li");
      const currentWinner = document.createElement("li");

      displaySelections.textContent = selections;
      currentScores.textContent = currScores;
      currentWinner.textContent = roundWinner;

      scoreBoard.appendChild(displaySelections);
      scoreBoard.appendChild(currentScores);
      scoreBoard.appendChild(currentWinner);
    }
  </script>
</html>
